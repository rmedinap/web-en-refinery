!function(){function e(){this.returnValue=!1}function t(){this.cancelBubble=!0}var i,n,s=0,r=[],a={},o={},l={"<":"lt",">":"gt","&":"amp",'"':"quot","'":"#39"},u=/[<>&\"\']/g,c=window.setTimeout,d={};!function(e){var t,i,n,s=e.split(/,/);for(t=0;t<s.length;t+=2)for(n=s[t+1].split(/ /),i=0;i<n.length;i++)o[n[i]]=s[t]}("application/msword,doc dot,application/pdf,pdf,application/pgp-signature,pgp,application/postscript,ps ai eps,application/rtf,rtf,application/vnd.ms-excel,xls xlb,application/vnd.ms-powerpoint,ppt pps pot,application/zip,zip,application/x-shockwave-flash,swf swfl,application/vnd.openxmlformats-officedocument.wordprocessingml.document,docx,application/vnd.openxmlformats-officedocument.wordprocessingml.template,dotx,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,xlsx,application/vnd.openxmlformats-officedocument.presentationml.presentation,pptx,application/vnd.openxmlformats-officedocument.presentationml.template,potx,application/vnd.openxmlformats-officedocument.presentationml.slideshow,ppsx,application/x-javascript,js,application/json,json,audio/mpeg,mpga mpega mp2 mp3,audio/x-wav,wav,audio/mp4,m4a,image/bmp,bmp,image/gif,gif,image/jpeg,jpeg jpg jpe,image/photoshop,psd,image/png,png,image/svg+xml,svg svgz,image/tiff,tiff tif,text/plain,asc txt text diff log,text/html,htm html xhtml,text/css,css,text/csv,csv,text/rtf,rtf,video/mpeg,mpeg mpg mpe,video/quicktime,qt mov,video/mp4,mp4,video/x-m4v,m4v,video/x-flv,flv,video/x-ms-wmv,wmv,video/avi,avi,video/webm,webm,video/vnd.rn-realvideo,rv,application/vnd.oasis.opendocument.formula-template,otf,application/octet-stream,exe");var h={VERSION:"1.5.4",STOPPED:1,STARTED:2,QUEUED:1,UPLOADING:2,FAILED:4,DONE:5,GENERIC_ERROR:-100,HTTP_ERROR:-200,IO_ERROR:-300,SECURITY_ERROR:-400,INIT_ERROR:-500,FILE_SIZE_ERROR:-600,FILE_EXTENSION_ERROR:-601,IMAGE_FORMAT_ERROR:-700,IMAGE_MEMORY_ERROR:-701,IMAGE_DIMENSIONS_ERROR:-702,mimeTypes:o,ua:function(){var e,t,i,n=navigator,s=n.userAgent,r=n.vendor;return e=/WebKit/.test(s),i=e&&-1!==r.indexOf("Apple"),t=window.opera&&window.opera.buildNumber,{windows:-1!==navigator.platform.indexOf("Win"),ie:!e&&!t&&/MSIE/gi.test(s)&&/Explorer/gi.test(n.appName),webkit:e,gecko:!e&&/Gecko/.test(s),safari:i,opera:!!t}}(),typeOf:function(e){return{}.toString.call(e).match(/\s([a-z|A-Z]+)/)[1].toLowerCase()},extend:function(e){return h.each(arguments,function(t,i){i>0&&h.each(t,function(t,i){e[i]=t})}),e},cleanName:function(e){var t,i;for(i=[/[\300-\306]/g,"A",/[\340-\346]/g,"a",/\307/g,"C",/\347/g,"c",/[\310-\313]/g,"E",/[\350-\353]/g,"e",/[\314-\317]/g,"I",/[\354-\357]/g,"i",/\321/g,"N",/\361/g,"n",/[\322-\330]/g,"O",/[\362-\370]/g,"o",/[\331-\334]/g,"U",/[\371-\374]/g,"u"],t=0;t<i.length;t+=2)e=e.replace(i[t],i[t+1]);return e=e.replace(/\s+/g,"_"),e=e.replace(/[^a-z0-9_\-\.]+/gi,"")},addRuntime:function(e,t){return t.name=e,r[e]=t,r.push(t),t},guid:function(){var e,t=(new Date).getTime().toString(32);for(e=0;5>e;e++)t+=Math.floor(65535*Math.random()).toString(32);return(h.guidPrefix||"p")+t+(s++).toString(32)},buildUrl:function(e,t){var i="";return h.each(t,function(e,t){i+=(i?"&":"")+encodeURIComponent(t)+"="+encodeURIComponent(e)}),i&&(e+=(e.indexOf("?")>0?"&":"?")+i),e},each:function(e,t){var n,s,r;if(e)if(n=e.length,n===i){for(s in e)if(e.hasOwnProperty(s)&&t(e[s],s)===!1)return}else for(r=0;n>r;r++)if(t(e[r],r)===!1)return},formatSize:function(e){return e===i||/\D/.test(e)?h.translate("N/A"):e>1073741824?Math.round(e/1073741824,1)+" GB":e>1048576?Math.round(e/1048576,1)+" MB":e>1024?Math.round(e/1024,1)+" KB":e+" b"},getPos:function(e,t){function i(e){var t,i,n=0,s=0;return e&&(i=e.getBoundingClientRect(),t="CSS1Compat"===l.compatMode?l.documentElement:l.body,n=i.left+t.scrollLeft,s=i.top+t.scrollTop),{x:n,y:s}}var n,s,r,a=0,o=0,l=document;if(e=e,t=t||l.body,e&&e.getBoundingClientRect&&navigator.userAgent.indexOf("MSIE")>0&&l.documentMode<8)return s=i(e),r=i(t),{x:s.x-r.x,y:s.y-r.y};for(n=e;n&&n!=t&&n.nodeType;)a+=n.offsetLeft||0,o+=n.offsetTop||0,n=n.offsetParent;for(n=e.parentNode;n&&n!=t&&n.nodeType;)a-=n.scrollLeft||0,o-=n.scrollTop||0,n=n.parentNode;return{x:a,y:o}},getSize:function(e){return{w:e.offsetWidth||e.clientWidth,h:e.offsetHeight||e.clientHeight}},parseSize:function(e){var t;return"string"==typeof e&&(e=/^([0-9]+)([mgk]?)$/.exec(e.toLowerCase().replace(/[^0-9mkg]/g,"")),t=e[2],e=+e[1],"g"==t&&(e*=1073741824),"m"==t&&(e*=1048576),"k"==t&&(e*=1024)),e},xmlEncode:function(e){return e?(""+e).replace(u,function(e){return l[e]?"&"+l[e]+";":e}):e},toArray:function(e){var t,i=[];for(t=0;t<e.length;t++)i[t]=e[t];return i},inArray:function(e,t){if(t){if(Array.prototype.indexOf)return Array.prototype.indexOf.call(t,e);for(var i=0,n=t.length;n>i;i++)if(t[i]===e)return i}return-1},addI18n:function(e){return h.extend(a,e)},translate:function(e){return a[e]||e},isEmptyObj:function(e){if(e===i)return!0;for(var t in e)return!1;return!0},hasClass:function(e,t){var i;return""==e.className?!1:(i=new RegExp("(^|\\s+)"+t+"(\\s+|$)"),i.test(e.className))},addClass:function(e,t){h.hasClass(e,t)||(e.className=""==e.className?t:e.className.replace(/\s+$/,"")+" "+t)},removeClass:function(e,t){var i=new RegExp("(^|\\s+)"+t+"(\\s+|$)");e.className=e.className.replace(i,function(e,t,i){return" "===t&&" "===i?" ":""})},getStyle:function(e,t){return e.currentStyle?e.currentStyle[t]:window.getComputedStyle?window.getComputedStyle(e,null)[t]:void 0},addEvent:function(s,r,a){var o,l,u;u=arguments[3],r=r.toLowerCase(),n===i&&(n="Plupload_"+h.guid()),s.addEventListener?(o=a,s.addEventListener(r,o,!1)):s.attachEvent&&(o=function(){var i=window.event;i.target||(i.target=i.srcElement),i.preventDefault=e,i.stopPropagation=t,a(i)},s.attachEvent("on"+r,o)),s[n]===i&&(s[n]=h.guid()),d.hasOwnProperty(s[n])||(d[s[n]]={}),l=d[s[n]],l.hasOwnProperty(r)||(l[r]=[]),l[r].push({func:o,orig:a,key:u})},removeEvent:function(e,t){var s,r,a;if("function"==typeof arguments[2]?r=arguments[2]:a=arguments[2],t=t.toLowerCase(),e[n]&&d[e[n]]&&d[e[n]][t]){s=d[e[n]][t];for(var o=s.length-1;o>=0&&(s[o].key!==a&&s[o].orig!==r||(e.removeEventListener?e.removeEventListener(t,s[o].func,!1):e.detachEvent&&e.detachEvent("on"+t,s[o].func),s[o].orig=null,s[o].func=null,s.splice(o,1),r===i));o--);if(s.length||delete d[e[n]][t],h.isEmptyObj(d[e[n]])){delete d[e[n]];try{delete e[n]}catch(l){e[n]=i}}}},removeAllEvents:function(e){var t=arguments[1];e[n]!==i&&e[n]&&h.each(d[e[n]],function(i,n){h.removeEvent(e,n,t)})}};h.Uploader=function(e){function t(){var e,t,i=0;if(this.state==h.STARTED){for(t=0;t<l.length;t++)e||l[t].status!=h.QUEUED?i++:(e=l[t],e.status=h.UPLOADING,this.trigger("BeforeUpload",e)&&this.trigger("UploadFile",e));i==l.length&&(this.stop(),this.trigger("UploadComplete",l))}}function n(){var e,t;for(s.reset(),e=0;e<l.length;e++)t=l[e],t.size!==i?(s.size+=t.size,s.loaded+=t.loaded):s.size=i,t.status==h.DONE?s.uploaded++:t.status==h.FAILED?s.failed++:s.queued++;s.size===i?s.percent=l.length>0?Math.ceil(100*(s.uploaded/l.length)):0:(s.bytesPerSec=Math.ceil(s.loaded/((+new Date-a||1)/1e3)),s.percent=s.size>0?Math.ceil(100*(s.loaded/s.size)):0)}var s,a,o={},l=[],u=!1;s=new h.QueueProgress,e=h.extend({chunk_size:0,multipart:!0,multi_selection:!0,file_data_name:"file",filters:[]},e),h.extend(this,{state:h.STOPPED,runtime:"",features:{},files:l,settings:e,total:s,id:h.guid(),init:function(){function s(){var e,t,i,n=u[f++];if(n){if(e=n.getFeatures(),t=p.settings.required_features)for(t=t.split(","),i=0;i<t.length;i++)if(!e[t[i]])return s(),void 0;n.init(p,function(t){t&&t.success?(p.features=e,p.runtime=n.name,p.trigger("Init",{runtime:n.name}),p.trigger("PostInit"),p.refresh()):s()})}else p.trigger("Error",{code:h.INIT_ERROR,message:h.translate("Init error.")})}var o,u,d,p=this,f=0;if("function"==typeof e.preinit?e.preinit(p):h.each(e.preinit,function(e,t){p.bind(t,e)}),e.page_url=e.page_url||document.location.pathname.replace(/\/[^\/]+$/g,"/"),/^(\w+:\/\/|\/)/.test(e.url)||(e.url=e.page_url+e.url),e.chunk_size=h.parseSize(e.chunk_size),e.max_file_size=h.parseSize(e.max_file_size),p.bind("FilesAdded",function(t,n){var s,r,a,o=0,u=e.filters;for(u&&u.length&&(a=[],h.each(u,function(e){h.each(e.extensions.split(/,/),function(e){/^\s*\*\s*$/.test(e)?a.push("\\.*"):a.push("\\."+e.replace(new RegExp("["+"/^$.*+?|()[]{}\\".replace(/./g,"\\$&")+"]","g"),"\\$&"))})}),a=new RegExp(a.join("|")+"$","i")),s=0;s<n.length;s++)r=n[s],r.loaded=0,r.percent=0,r.status=h.QUEUED,!a||a.test(r.name)?r.size!==i&&r.size>e.max_file_size?t.trigger("Error",{code:h.FILE_SIZE_ERROR,message:h.translate("File size error."),file:r}):(l.push(r),o++):t.trigger("Error",{code:h.FILE_EXTENSION_ERROR,message:h.translate("File extension error."),file:r});return o?(c(function(){p.trigger("QueueChanged"),p.refresh()},1),void 0):!1}),e.unique_names&&p.bind("UploadFile",function(e,t){var i=t.name.match(/\.([^.]+)$/),n="tmp";i&&(n=i[1]),t.target_name=t.id+"."+n}),p.bind("UploadProgress",function(e,t){t.percent=t.size>0?Math.ceil(100*(t.loaded/t.size)):100,n()}),p.bind("StateChanged",function(e){if(e.state==h.STARTED)a=+new Date;else if(e.state==h.STOPPED)for(o=e.files.length-1;o>=0;o--)e.files[o].status==h.UPLOADING&&(e.files[o].status=h.QUEUED,n())}),p.bind("QueueChanged",n),p.bind("Error",function(e,i){i.file&&(i.file.status=h.FAILED,n(),e.state==h.STARTED&&c(function(){t.call(p)},1))}),p.bind("FileUploaded",function(e,i){i.status=h.DONE,i.loaded=i.size,e.trigger("UploadProgress",i),c(function(){t.call(p)},1)}),e.runtimes)for(u=[],d=e.runtimes.split(/\s?,\s?/),o=0;o<d.length;o++)r[d[o]]&&u.push(r[d[o]]);else u=r;s(),"function"==typeof e.init?e.init(p):h.each(e.init,function(e,t){p.bind(t,e)})},refresh:function(){this.trigger("Refresh")},start:function(){l.length&&this.state!=h.STARTED&&(this.state=h.STARTED,this.trigger("StateChanged"),t.call(this))},stop:function(){this.state!=h.STOPPED&&(this.state=h.STOPPED,this.trigger("CancelUpload"),this.trigger("StateChanged"))},disableBrowse:function(){u=arguments[0]!==i?arguments[0]:!0,this.trigger("DisableBrowse",u)},getFile:function(e){var t;for(t=l.length-1;t>=0;t--)if(l[t].id===e)return l[t]},removeFile:function(e){var t;for(t=l.length-1;t>=0;t--)if(l[t].id===e.id)return this.splice(t,1)[0]},splice:function(e,t){var n;return n=l.splice(e===i?0:e,t===i?l.length:t),this.trigger("FilesRemoved",n),this.trigger("QueueChanged"),n},trigger:function(e){var t,i,n=o[e.toLowerCase()];if(n)for(i=Array.prototype.slice.call(arguments),i[0]=this,t=0;t<n.length;t++)if(n[t].func.apply(n[t].scope,i)===!1)return!1;return!0},hasEventListener:function(e){return!!o[e.toLowerCase()]},bind:function(e,t,i){var n;e=e.toLowerCase(),n=o[e]||[],n.push({func:t,scope:i||this}),o[e]=n},unbind:function(e){e=e.toLowerCase();var t,n=o[e],s=arguments[1];if(n){if(s!==i){for(t=n.length-1;t>=0;t--)if(n[t].func===s){n.splice(t,1);break}}else n=[];n.length||delete o[e]}},unbindAll:function(){var e=this;h.each(o,function(t,i){e.unbind(i)})},destroy:function(){this.stop(),this.trigger("Destroy"),this.unbindAll()}})},h.File=function(e,t,i){var n=this;n.id=e,n.name=t,n.size=i,n.loaded=0,n.percent=0,n.status=0},h.Runtime=function(){this.getFeatures=function(){},this.init=function(){}},h.QueueProgress=function(){var e=this;e.size=0,e.loaded=0,e.uploaded=0,e.failed=0,e.queued=0,e.percent=0,e.bytesPerSec=0,e.reset=function(){e.size=e.loaded=e.uploaded=e.failed=e.queued=e.percent=e.bytesPerSec=0}},h.runtimes={},window.plupload=h}(),function(){if(!window.google||!google.gears){var e=null;if("undefined"!=typeof GearsFactory)e=new GearsFactory;else try{e=new ActiveXObject("Gears.Factory"),-1!=e.getBuildInfo().indexOf("ie_mobile")&&e.privateSetGlobalObject(this)}catch(t){"undefined"!=typeof navigator.mimeTypes&&navigator.mimeTypes["application/x-googlegears"]&&(e=document.createElement("object"),e.style.display="none",e.width=0,e.height=0,e.type="application/x-googlegears",document.documentElement.appendChild(e))}e&&(window.google||(window.google={}),google.gears||(google.gears={factory:e}))}}(),function(e,t,i){function n(e,t,i){var n,s;n=google.gears.factory.create("beta.canvas");try{if(n.decode(e),t.width||(t.width=n.width),t.height||(t.height=n.height),s=Math.min(width/n.width,height/n.height),1>s||1===s&&"image/jpeg"===i)return n.resize(Math.round(n.width*s),Math.round(n.height*s)),t.quality?n.encode(i,{quality:t.quality/100}):n.encode(i)}catch(r){}return e}var s={};i.runtimes.Gears=i.addRuntime("gears",{getFeatures:function(){return{dragdrop:!0,jpgresize:!0,pngresize:!0,chunks:!0,progress:!0,multipart:!0,multi_selection:!0}},init:function(r,a){function o(e){var t,n,a,o=[];for(n=0;n<e.length;n++)t=e[n],a=i.guid(),s[a]=t.blob,o.push(new i.File(a,t.name,t.blob.length));r.trigger("FilesAdded",o)}var l,u,c=!1;if(!e.google||!google.gears)return a({success:!1});try{l=google.gears.factory.create("beta.desktop")}catch(d){return a({success:!1})}r.bind("PostInit",function(){var e=r.settings,n=t.getElementById(e.drop_element);n&&(i.addEvent(n,"dragover",function(e){l.setDropEffect(e,"copy"),e.preventDefault()},r.id),i.addEvent(n,"drop",function(e){var t=l.getDragData(e,"application/x-gears-files");t&&o(t.files),e.preventDefault()},r.id),n=0),i.addEvent(t.getElementById(e.browse_button),"click",function(t){var i,n,s,r=[];if(t.preventDefault(),!c){e:for(i=0;i<e.filters.length;i++)for(s=e.filters[i].extensions.split(","),n=0;n<s.length;n++){if("*"===s[n]){r=[];break e}r.push("."+s[n])}l.openFiles(o,{singleFile:!e.multi_selection,filter:r})}},r.id)}),r.bind("CancelUpload",function(){u.abort&&u.abort()}),r.bind("UploadFile",function(e,t){function r(){function n(n){var s,r,a,o="----pluploadboundary"+i.guid(),l="--",c="\r\n";p&&(u.setRequestHeader("Content-Type","multipart/form-data; boundary="+o),s=google.gears.factory.create("beta.blobbuilder"),i.each(i.extend(g,e.settings.multipart_params),function(e,t){s.append(l+o+c+'Content-Disposition: form-data; name="'+t+'"'+c+c),s.append(e+c)}),a=i.mimeTypes[t.name.replace(/^.+\.([^.]+)/,"$1").toLowerCase()]||"application/octet-stream",s.append(l+o+c+'Content-Disposition: form-data; name="'+e.settings.file_data_name+'"; filename="'+t.name+'"'+c+"Content-Type: "+a+c+c),s.append(n),s.append(c+l+o+l+c),r=s.getAsBlob(),f=r.length-n.length,n=r),u.send(n)}var h,p=e.settings.multipart,f=0,g={name:t.target_name||t.name},m=e.settings.url;t.status!=i.DONE&&t.status!=i.FAILED&&e.state!=i.STOPPED&&(l&&(g.chunk=c,g.chunks=a),h=Math.min(o,t.size-c*o),p||(m=i.buildUrl(e.settings.url,g)),u=google.gears.factory.create("beta.httprequest"),u.open("POST",m),p||(u.setRequestHeader("Content-Disposition",'attachment; filename="'+t.name+'"'),u.setRequestHeader("Content-Type","application/octet-stream")),i.each(e.settings.headers,function(e,t){u.setRequestHeader(t,e)}),u.upload.onprogress=function(i){t.loaded=d+i.loaded-f,e.trigger("UploadProgress",t)},u.onreadystatechange=function(){var n;if(4==u.readyState&&e.state!==i.STOPPED)if(200==u.status){if(n={chunk:c,chunks:a,response:u.responseText,status:u.status},e.trigger("ChunkUploaded",t,n),n.cancelled)return t.status=i.FAILED,void 0;d+=h,++c>=a?(t.status=i.DONE,e.trigger("FileUploaded",t,{response:u.responseText,status:u.status})):r()}else e.trigger("Error",{code:i.HTTP_ERROR,message:i.translate("HTTP Error."),file:t,chunk:c,chunks:a,status:u.status})},a>c&&n(s[t.id].slice(c*o,h)))}var a,o,l,c=0,d=0,h=e.settings.resize;h&&/\.(png|jpg|jpeg)$/i.test(t.name)&&(s[t.id]=n(s[t.id],h,/\.png$/i.test(t.name)?"image/png":"image/jpeg")),t.size=s[t.id].length,o=e.settings.chunk_size,l=o>0,a=Math.ceil(t.size/o),l||(o=t.size,a=1),r()}),r.bind("DisableBrowse",function(e,t){c=t}),r.bind("Destroy",function(e){var n,s,r={browseButton:e.settings.browse_button,dropElm:e.settings.drop_element};for(n in r)s=t.getElementById(r[n]),s&&i.removeAllEvents(s,e.id)}),a({success:!0})}})}(window,document,plupload),function(e,t,i,n){function s(e){var t,i,r,a,o=typeof e;if(e===n||null===e)return"null";if("string"===o)return t="\bb	t\nn\ff\rr\"\"''\\\\",'"'+e.replace(/([\u0080-\uFFFF\x00-\x1f\"])/g,function(e,i){var n=t.indexOf(i);return n+1?"\\"+t.charAt(n+1):(e=i.charCodeAt().toString(16),"\\u"+"0000".substring(e.length)+e)})+'"';if("object"==o){if(i=e.length!==n,t="",i){for(r=0;r<e.length;r++)t&&(t+=","),t+=s(e[r]);t="["+t+"]"}else{for(a in e)e.hasOwnProperty(a)&&(t&&(t+=","),t+=s(a)+":"+s(e[a]));t="{"+t+"}"}return t}return""+e}function r(e){var t,i,n,s,r,a=!1,o=null,l=0;try{try{o=new ActiveXObject("AgControl.AgControl"),o.IsVersionSupported(e)&&(a=!0),o=null}catch(u){var c=navigator.plugins["Silverlight Plug-In"];if(c){for(t=c.description,"1.0.30226.2"===t&&(t="2.0.30226.2"),i=t.split(".");i.length>3;)i.pop();for(;i.length<4;)i.push(0);for(n=e.split(".");n.length>4;)n.pop();do s=parseInt(n[l],10),r=parseInt(i[l],10),l++;while(l<n.length&&s===r);r>=s&&!isNaN(s)&&(a=!0)}}}catch(d){a=!1}return a}var a={},o={};i.silverlight={trigger:function(e,t){var n,s=a[e];s&&(n=i.toArray(arguments).slice(1),n[0]="Silverlight:"+t,setTimeout(function(){s.trigger.apply(s,n)},0))}},i.runtimes.Silverlight=i.addRuntime("silverlight",{getFeatures:function(){return{jpgresize:!0,pngresize:!0,chunks:!0,progress:!0,multipart:!0,multi_selection:!0}},init:function(n,l){function u(){return t.getElementById(n.id+"_silverlight").content.Upload}var c,d,h="",p=n.settings.filters,f=t.body;if(!r("2.0.31005.0")||e.opera&&e.opera.buildNumber)return l({success:!1}),void 0;for(o[n.id]=!1,a[n.id]=n,c=t.createElement("div"),c.id=n.id+"_silverlight_container",i.extend(c.style,{position:"absolute",top:"0px",background:n.settings.shim_bgcolor||"transparent",zIndex:99999,width:"100px",height:"100px",overflow:"hidden",opacity:n.settings.shim_bgcolor||t.documentMode>8?"":.01}),c.className="plupload silverlight",n.settings.container&&(f=t.getElementById(n.settings.container),"static"===i.getStyle(f,"position")&&(f.style.position="relative")),f.appendChild(c),d=0;d<p.length;d++)h+=(""!=h?"|":"")+p[d].title+" | *."+p[d].extensions.replace(/,/g,";*.");c.innerHTML='<object id="'+n.id+'_silverlight" data="data:application/x-silverlight," type="application/x-silverlight-2" style="outline:none;" width="1024" height="1024"><param name="source" value="'+n.settings.silverlight_xap_url+'"/><param name="background" value="Transparent"/><param name="windowless" value="true"/><param name="enablehtmlaccess" value="true"/><param name="initParams" value="id='+n.id+",filter="+h+",multiselect="+n.settings.multi_selection+'"/></object>',n.bind("Silverlight:Init",function(){var e,r={};o[n.id]||(o[n.id]=!0,n.bind("Silverlight:StartSelectFiles",function(){e=[]}),n.bind("Silverlight:SelectFile",function(t,n,s,a){var o;o=i.guid(),r[o]=n,r[n]=o,e.push(new i.File(o,s,a))}),n.bind("Silverlight:SelectSuccessful",function(){e.length&&n.trigger("FilesAdded",e)}),n.bind("Silverlight:UploadChunkError",function(e,t,s,a,o){n.trigger("Error",{code:i.IO_ERROR,message:"IO Error.",details:o,file:e.getFile(r[t])})}),n.bind("Silverlight:UploadFileProgress",function(e,t,n,s){var a=e.getFile(r[t]);a.status!=i.FAILED&&(a.size=s,a.loaded=n,e.trigger("UploadProgress",a))}),n.bind("Refresh",function(e){var n,s,r;n=t.getElementById(e.settings.browse_button),n&&(s=i.getPos(n,t.getElementById(e.settings.container)),r=i.getSize(n),i.extend(t.getElementById(e.id+"_silverlight_container").style,{top:s.y+"px",left:s.x+"px",width:r.w+"px",height:r.h+"px"}))}),n.bind("Silverlight:UploadChunkSuccessful",function(e,t,n,s,a){var o,l=e.getFile(r[t]);o={chunk:n,chunks:s,response:a},e.trigger("ChunkUploaded",l,o),l.status!=i.FAILED&&e.state!==i.STOPPED&&u().UploadNextChunk(),n==s-1&&(l.status=i.DONE,e.trigger("FileUploaded",l,{response:a}))}),n.bind("Silverlight:UploadSuccessful",function(e,t,n){var s=e.getFile(r[t]);s.status=i.DONE,e.trigger("FileUploaded",s,{response:n})}),n.bind("FilesRemoved",function(e,t){var i;for(i=0;i<t.length;i++)u().RemoveFile(r[t[i].id])}),n.bind("UploadFile",function(e,t){var n=e.settings,a=n.resize||{};u().UploadFile(r[t.id],e.settings.url,s({name:t.target_name||t.name,mime:i.mimeTypes[t.name.replace(/^.+\.([^.]+)/,"$1").toLowerCase()]||"application/octet-stream",chunk_size:n.chunk_size,image_width:a.width,image_height:a.height,image_quality:a.quality||90,multipart:!!n.multipart,multipart_params:n.multipart_params||{},file_data_name:n.file_data_name,headers:n.headers}))}),n.bind("CancelUpload",function(){u().CancelUpload()}),n.bind("Silverlight:MouseEnter",function(e){var s,r;s=t.getElementById(n.settings.browse_button),r=e.settings.browse_button_hover,s&&r&&i.addClass(s,r)}),n.bind("Silverlight:MouseLeave",function(e){var s,r;s=t.getElementById(n.settings.browse_button),r=e.settings.browse_button_hover,s&&r&&i.removeClass(s,r)}),n.bind("Silverlight:MouseLeftButtonDown",function(e){var s,r;s=t.getElementById(n.settings.browse_button),r=e.settings.browse_button_active,s&&r&&(i.addClass(s,r),i.addEvent(t.body,"mouseup",function(){i.removeClass(s,r)}))}),n.bind("Sliverlight:StartSelectFiles",function(e){var s,r;s=t.getElementById(n.settings.browse_button),r=e.settings.browse_button_active,s&&r&&i.removeClass(s,r)}),n.bind("DisableBrowse",function(e,t){u().DisableBrowse(t)}),n.bind("Destroy",function(e){var n;i.removeAllEvents(t.body,e.id),delete o[e.id],delete a[e.id],n=t.getElementById(e.id+"_silverlight_container"),n&&f.removeChild(n)}),l({success:!0}))})}})}(window,document,plupload),function(e,t,i){function n(){var e;try{e=navigator.plugins["Shockwave Flash"],e=e.description}catch(t){try{e=new ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version")}catch(i){e="0.0"}}return e=e.match(/\d+/g),parseFloat(e[0]+"."+e[1])}var s={},r={};i.flash={trigger:function(e,t,i){setTimeout(function(){var n=s[e];n&&n.trigger("Flash:"+t,i)},0)}},i.runtimes.Flash=i.addRuntime("flash",{getFeatures:function(){return{jpgresize:!0,pngresize:!0,maxWidth:8091,maxHeight:8091,chunks:!0,progress:!0,multipart:!0,multi_selection:!0}},init:function(e,a){function o(){return t.getElementById(e.id+"_flash")}function l(){return d++>5e3?(a({success:!1}),void 0):(r[e.id]===!1&&setTimeout(l,1),void 0)}var u,c,d=0,h=t.body;return n()<10?(a({success:!1}),void 0):(r[e.id]=!1,s[e.id]=e,u=t.getElementById(e.settings.browse_button),c=t.createElement("div"),c.id=e.id+"_flash_container",i.extend(c.style,{position:"absolute",top:"0px",background:e.settings.shim_bgcolor||"transparent",zIndex:99999,width:"100%",height:"100%"}),c.className="plupload flash",e.settings.container&&(h=t.getElementById(e.settings.container),"static"===i.getStyle(h,"position")&&(h.style.position="relative")),h.appendChild(c),function(){var n,s;n='<object id="'+e.id+'_flash" type="application/x-shockwave-flash" data="'+e.settings.flash_swf_url+'" ',i.ua.ie&&(n+='classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" '),n+='width="100%" height="100%" style="outline:0"><param name="movie" value="'+e.settings.flash_swf_url+'" /><param name="flashvars" value="id='+escape(e.id)+'" /><param name="wmode" value="transparent" /><param name="allowscriptaccess" value="always" /></object>',i.ua.ie?(s=t.createElement("div"),c.appendChild(s),s.outerHTML=n,s=null):c.innerHTML=n}(),l(),u=c=null,e.bind("Destroy",function(e){var n;i.removeAllEvents(t.body,e.id),delete r[e.id],delete s[e.id],n=t.getElementById(e.id+"_flash_container"),n&&h.removeChild(n)}),e.bind("Flash:Init",function(){var n={};try{o().setFileFilters(e.settings.filters,e.settings.multi_selection)}catch(s){return a({success:!1}),void 0}r[e.id]||(r[e.id]=!0,e.bind("UploadFile",function(t,s){var r=t.settings,a=e.settings.resize||{};o().uploadFile(n[s.id],r.url,{name:s.target_name||s.name,mime:i.mimeTypes[s.name.replace(/^.+\.([^.]+)/,"$1").toLowerCase()]||"application/octet-stream",chunk_size:r.chunk_size,width:a.width,height:a.height,quality:a.quality,multipart:r.multipart,multipart_params:r.multipart_params||{},file_data_name:r.file_data_name,format:/\.(jpg|jpeg)$/i.test(s.name)?"jpg":"png",headers:r.headers,urlstream_upload:r.urlstream_upload})}),e.bind("CancelUpload",function(){o().cancelUpload()}),e.bind("Flash:UploadProcess",function(e,t){var s=e.getFile(n[t.id]);s.status!=i.FAILED&&(s.loaded=t.loaded,s.size=t.size,e.trigger("UploadProgress",s))}),e.bind("Flash:UploadChunkComplete",function(e,t){var s,r=e.getFile(n[t.id]);s={chunk:t.chunk,chunks:t.chunks,response:t.text},e.trigger("ChunkUploaded",r,s),r.status!==i.FAILED&&e.state!==i.STOPPED&&o().uploadNextChunk(),t.chunk==t.chunks-1&&(r.status=i.DONE,e.trigger("FileUploaded",r,{response:t.text}))}),e.bind("Flash:SelectFiles",function(t,s){var r,a,o,l=[];for(a=0;a<s.length;a++)r=s[a],o=i.guid(),n[o]=r.id,n[r.id]=o,l.push(new i.File(o,r.name,r.size));l.length&&e.trigger("FilesAdded",l)}),e.bind("Flash:SecurityError",function(t,s){e.trigger("Error",{code:i.SECURITY_ERROR,message:i.translate("Security error."),details:s.message,file:e.getFile(n[s.id])})}),e.bind("Flash:GenericError",function(t,s){e.trigger("Error",{code:i.GENERIC_ERROR,message:i.translate("Generic error."),details:s.message,file:e.getFile(n[s.id])})}),e.bind("Flash:IOError",function(t,s){e.trigger("Error",{code:i.IO_ERROR,message:i.translate("IO error."),details:s.message,file:e.getFile(n[s.id])})}),e.bind("Flash:ImageError",function(t,s){e.trigger("Error",{code:parseInt(s.code,10),message:i.translate("Image error."),file:e.getFile(n[s.id])})}),e.bind("Flash:StageEvent:rollOver",function(n){var s,r;s=t.getElementById(e.settings.browse_button),r=n.settings.browse_button_hover,s&&r&&i.addClass(s,r)}),e.bind("Flash:StageEvent:rollOut",function(n){var s,r;s=t.getElementById(e.settings.browse_button),r=n.settings.browse_button_hover,s&&r&&i.removeClass(s,r)}),e.bind("Flash:StageEvent:mouseDown",function(n){var s,r;s=t.getElementById(e.settings.browse_button),r=n.settings.browse_button_active,s&&r&&(i.addClass(s,r),i.addEvent(t.body,"mouseup",function(){i.removeClass(s,r)},n.id))}),e.bind("Flash:StageEvent:mouseUp",function(n){var s,r;s=t.getElementById(e.settings.browse_button),r=n.settings.browse_button_active,s&&r&&i.removeClass(s,r)}),e.bind("Flash:ExifData",function(t,i){e.trigger("ExifData",e.getFile(n[i.id]),i.data)}),e.bind("Flash:GpsData",function(t,i){e.trigger("GpsData",e.getFile(n[i.id]),i.data)}),e.bind("QueueChanged",function(){e.refresh()}),e.bind("FilesRemoved",function(e,t){var i;for(i=0;i<t.length;i++)o().removeFile(n[t[i].id])}),e.bind("StateChanged",function(){e.refresh()}),e.bind("Refresh",function(n){var s,r,a;o().setFileFilters(e.settings.filters,e.settings.multi_selection),s=t.getElementById(n.settings.browse_button),s&&(r=i.getPos(s,t.getElementById(n.settings.container)),a=i.getSize(s),i.extend(t.getElementById(n.id+"_flash_container").style,{top:r.y+"px",left:r.x+"px",width:a.w+"px",height:a.h+"px"}))}),e.bind("DisableBrowse",function(e,t){o().disableBrowse(t)}),a({success:!0}))}),void 0)}})}(window,document,plupload),function(e){e.runtimes.BrowserPlus=e.addRuntime("browserplus",{getFeatures:function(){return{dragdrop:!0,jpgresize:!0,pngresize:!0,chunks:!0,progress:!0,multipart:!0,multi_selection:!0}},init:function(t,i){function n(i){var n,s,r,o=[];for(n=0;n<i.length;n++)s=i[n],r=e.guid(),a[r]=s,o.push(new e.File(r,s.name,s.size));n&&t.trigger("FilesAdded",o)}function s(){var s=!1;t.bind("PostInit",function(){function i(e,t){r.DragAndDrop.AddDropTarget({id:e},function(){r.DragAndDrop.AttachCallbacks({id:e,hover:function(e){!e&&t&&t()},drop:function(e){t&&t(),n(e)}},function(){})})}function a(){document.getElementById(c).style.top="-1000px"}var l,u=o.drop_element,c=t.id+"_droptarget",d=document.getElementById(u);d&&(document.attachEvent&&/MSIE/gi.test(navigator.userAgent)?(l=document.createElement("div"),l.setAttribute("id",c),e.extend(l.style,{position:"absolute",top:"-1000px",background:"red",filter:"alpha(opacity=0)",opacity:0}),document.body.appendChild(l),e.addEvent(d,"dragenter",function(){var t,i;t=document.getElementById(u),i=e.getPos(t),e.extend(document.getElementById(c).style,{top:i.y+"px",left:i.x+"px",width:t.offsetWidth+"px",height:t.offsetHeight+"px"})}),i(c,a)):i(u)),e.addEvent(document.getElementById(o.browse_button),"click",function(t){var i,a,l,u,c=[],d=o.filters;if(t.preventDefault(),!s){e:for(i=0;i<d.length;i++)for(l=d[i].extensions.split(","),a=0;a<l.length;a++){if("*"===l[a]){c=[];break e}u=e.mimeTypes[l[a]],u&&-1===e.inArray(u,c)&&c.push(e.mimeTypes[l[a]])}r.FileBrowse.OpenBrowseDialog({mimeTypes:c},function(e){e.success&&n(e.value)})}}),d=l=null}),t.bind("CancelUpload",function(){r.Uploader.cancel({},function(){})}),t.bind("DisableBrowse",function(e,t){s=t}),t.bind("UploadFile",function(t,i){function n(s,a){var l;i.status!=e.FAILED&&(c.name=i.target_name||i.name,d&&(c.chunk=""+s,c.chunks=""+a),l=h.shift(),r.Uploader.upload({url:t.settings.url,files:{file:l},cookies:document.cookies,postvars:e.extend(c,t.settings.multipart_params),progressCallback:function(e){var n,r=0;for(o[s]=parseInt(e.filePercent*l.size/100,10),n=0;n<o.length;n++)r+=o[n];i.loaded=r,t.trigger("UploadProgress",i)}},function(r){var o;r.success?(o=r.value.statusCode,d&&t.trigger("ChunkUploaded",i,{chunk:s,chunks:a,response:r.value.body,status:o}),h.length>0?n(++s,a):(i.status=e.DONE,t.trigger("FileUploaded",i,{response:r.value.body,status:o}),o>=400&&t.trigger("Error",{code:e.HTTP_ERROR,message:e.translate("HTTP Error."),file:i,status:o}))):t.trigger("Error",{code:e.GENERIC_ERROR,message:e.translate("Generic Error."),file:i,details:r.error})}))}function s(e){i.size=e.size,d?r.FileAccess.chunk({file:e,chunkSize:d},function(e){if(e.success){var t=e.value,i=t.length;o=Array(i);for(var s=0;i>s;s++)o[s]=0,h.push(t[s]);n(0,i)}}):(o=Array(1),h.push(e),n(0,1))}var o,u=a[i.id],c={},d=t.settings.chunk_size,h=[];l&&/\.(png|jpg|jpeg)$/i.test(i.name)?BrowserPlus.ImageAlter.transform({file:u,quality:l.quality||90,actions:[{scale:{maxwidth:l.width,maxheight:l.height}}]},function(e){e.success&&s(e.value.file)}):s(u)}),i({success:!0})}var r=window.BrowserPlus,a={},o=t.settings,l=o.resize;r?r.init(function(e){var t=[{service:"Uploader",version:"3"},{service:"DragAndDrop",version:"1"},{service:"FileBrowse",version:"1"},{service:"FileAccess",version:"2"}];l&&t.push({service:"ImageAlter",version:"4"}),e.success?r.require({services:t},function(e){e.success?s():i()}):i()}):i()}})}(plupload),function(e,t,n,s){function r(t,i){var n;return"FileReader"in e?(n=new FileReader,n.readAsDataURL(t),n.onload=function(){i(n.result)},void 0):i(t.getAsDataURL())}function a(t,i){var n;return"FileReader"in e?(n=new FileReader,n.readAsBinaryString(t),n.onload=function(){i(n.result)},void 0):i(t.getAsBinary())}function o(e,i,n,s){var a,o,l,d,p=this;r(h[e.id],function(r){a=t.createElement("canvas"),a.style.display="none",t.body.appendChild(a),o=a.getContext("2d"),l=new Image,l.onerror=l.onabort=function(){s({success:!1})},l.onload=function(){var t,h,f,g;if(i.width||(i.width=l.width),i.height||(i.height=l.height),d=Math.min(i.width/l.width,i.height/l.height),1>d||1===d&&"image/jpeg"===n){if(t=Math.round(l.width*d),h=Math.round(l.height*d),a.width=t,a.height=h,o.drawImage(l,0,0,t,h),"image/jpeg"===n){if(f=new u(atob(r.substring(r.indexOf("base64,")+7))),f.headers&&f.headers.length&&(g=new c,g.init(f.get("exif")[0])&&(g.setExif("PixelXDimension",t),g.setExif("PixelYDimension",h),f.set("exif",g.getBinary()),p.hasEventListener("ExifData")&&p.trigger("ExifData",e,g.EXIF()),p.hasEventListener("GpsData")&&p.trigger("GpsData",e,g.GPS()))),i.quality)try{r=a.toDataURL(n,i.quality/100)}catch(m){r=a.toDataURL(n)}}else r=a.toDataURL(n);r=r.substring(r.indexOf("base64,")+7),r=atob(r),f&&f.headers&&f.headers.length&&(r=f.restore(r),f.purge()),a.parentNode.removeChild(a),s({success:!0,data:r})}else s({success:!1})},l.src=r})}function l(){function e(e,t){var i,s=r?0:-8*(t-1),a=0;for(i=0;t>i;i++)a|=n.charCodeAt(e+i)<<Math.abs(s+8*i);return a}function t(e,t,i){var i=3===arguments.length?i:n.length-t-1;n=n.substr(0,t)+e+n.substr(i+t)}function i(e,i,n){var s,a="",o=r?0:-8*(n-1);for(s=0;n>s;s++)a+=String.fromCharCode(255&i>>Math.abs(o+8*s));t(a,e,n)}var n,r=!1;return{II:function(e){return e===s?r:(r=e,void 0)},init:function(e){r=!1,n=e},SEGMENT:function(e,i,s){switch(arguments.length){case 1:return n.substr(e,n.length-e-1);case 2:return n.substr(e,i);case 3:t(s,e,i);break;default:return n}},BYTE:function(t){return e(t,1)},SHORT:function(t){return e(t,2)},LONG:function(t,n){return n===s?e(t,4):(i(t,n,4),void 0)},SLONG:function(t){var i=e(t,4);return i>2147483647?i-4294967296:i},STRING:function(t,i){var n="";for(i+=t;i>t;t++)n+=String.fromCharCode(e(t,1));return n}}}function u(e){var t,i,n,r={65505:{app:"EXIF",name:"APP1",signature:"Exif\x00"},65506:{app:"ICC",name:"APP2",signature:"ICC_PROFILE\x00"},65517:{app:"IPTC",name:"APP13",signature:"Photoshop 3.0\x00"}},a=[],o=s,c=0;if(t=new l,t.init(e),65496===t.SHORT(0)){for(i=2,n=Math.min(1048576,e.length);n>=i;)if(o=t.SHORT(i),o>=65488&&65495>=o)i+=2;
else{if(65498===o||65497===o)break;c=t.SHORT(i+2)+2,r[o]&&t.STRING(i+4,r[o].signature.length)===r[o].signature&&a.push({hex:o,app:r[o].app.toUpperCase(),name:r[o].name.toUpperCase(),start:i,length:c,segment:t.SEGMENT(i,c)}),i+=c}return t.init(null),{headers:a,restore:function(e){t.init(e);var n=new u(e);if(!n.headers)return!1;for(var s=n.headers.length;s>0;s--){var r=n.headers[s-1];t.SEGMENT(r.start,r.length,"")}n.purge(),i=65504==t.SHORT(2)?4+t.SHORT(4):2;for(var s=0,o=a.length;o>s;s++)t.SEGMENT(i,0,a[s].segment),i+=a[s].length;return t.SEGMENT()},get:function(e){for(var t=[],i=0,n=a.length;n>i;i++)a[i].app===e.toUpperCase()&&t.push(a[i].segment);return t},set:function(e,t){var i=[];"string"==typeof t?i.push(t):i=t;for(var n=ii=0,s=a.length;s>n&&(a[n].app===e.toUpperCase()&&(a[n].segment=i[ii],a[n].length=i[ii].length,ii++),!(ii>=i.length));n++);},purge:function(){a=[],t.init(null)}}}}function c(){function e(e,t){var i,n,r,o,l,d,h,p,f=a.SHORT(e),g=[],m={};for(i=0;f>i;i++)if(h=d=e+12*i+2,r=t[a.SHORT(h)],r!==s){switch(o=a.SHORT(h+=2),l=a.LONG(h+=2),h+=4,g=[],o){case 1:case 7:for(l>4&&(h=a.LONG(h)+c.tiffHeader),n=0;l>n;n++)g[n]=a.BYTE(h+n);break;case 2:l>4&&(h=a.LONG(h)+c.tiffHeader),m[r]=a.STRING(h,l-1);continue;case 3:for(l>2&&(h=a.LONG(h)+c.tiffHeader),n=0;l>n;n++)g[n]=a.SHORT(h+2*n);break;case 4:for(l>1&&(h=a.LONG(h)+c.tiffHeader),n=0;l>n;n++)g[n]=a.LONG(h+4*n);break;case 5:for(h=a.LONG(h)+c.tiffHeader,n=0;l>n;n++)g[n]=a.LONG(h+4*n)/a.LONG(h+4*n+4);break;case 9:for(h=a.LONG(h)+c.tiffHeader,n=0;l>n;n++)g[n]=a.SLONG(h+4*n);break;case 10:for(h=a.LONG(h)+c.tiffHeader,n=0;l>n;n++)g[n]=a.SLONG(h+4*n)/a.SLONG(h+4*n+4);break;default:continue}p=1==l?g[0]:g,m[r]=u.hasOwnProperty(r)&&"object"!=typeof p?u[r][p]:p}return m}function t(){var t=s,i=c.tiffHeader;return a.II(18761==a.SHORT(i)),42!==a.SHORT(i+=2)?!1:(c.IFD0=c.tiffHeader+a.LONG(i+=2),t=e(c.IFD0,o.tiff),c.exifIFD="ExifIFDPointer"in t?c.tiffHeader+t.ExifIFDPointer:s,c.gpsIFD="GPSInfoIFDPointer"in t?c.tiffHeader+t.GPSInfoIFDPointer:s,!0)}function r(e,t,n){var s,r,l,u=0;if("string"==typeof t){var d=o[e.toLowerCase()];for(hex in d)if(d[hex]===t){t=hex;break}}for(s=c[e.toLowerCase()+"IFD"],r=a.SHORT(s),i=0;r>i;i++)if(l=s+12*i+2,a.SHORT(l)==t){u=l+8;break}return u?(a.LONG(u,n),!0):!1}var a,o,u,c={};return a=new l,o={tiff:{274:"Orientation",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer"},exif:{36864:"ExifVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",36867:"DateTimeOriginal",33434:"ExposureTime",33437:"FNumber",34855:"ISOSpeedRatings",37377:"ShutterSpeedValue",37378:"ApertureValue",37383:"MeteringMode",37384:"LightSource",37385:"Flash",41986:"ExposureMode",41987:"WhiteBalance",41990:"SceneCaptureType",41988:"DigitalZoomRatio",41992:"Contrast",41993:"Saturation",41994:"Sharpness"},gps:{0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude"}},u={ColorSpace:{1:"sRGB",0:"Uncalibrated"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{1:"Daylight",2:"Fliorescent",3:"Tungsten",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 -5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire.",1:"Flash fired.",5:"Strobe return light not detected.",7:"Strobe return light detected.",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},ExposureMode:{0:"Auto exposure",1:"Manual exposure",2:"Auto bracket"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},GPSLatitudeRef:{N:"North latitude",S:"South latitude"},GPSLongitudeRef:{E:"East longitude",W:"West longitude"}},{init:function(e){return c={tiffHeader:10},e!==s&&e.length?(a.init(e),65505===a.SHORT(0)&&"EXIF\x00"===a.STRING(4,5).toUpperCase()?t():!1):!1},EXIF:function(){var t;if(t=e(c.exifIFD,o.exif),t.ExifVersion&&"array"===n.typeOf(t.ExifVersion)){for(var i=0,s="";i<t.ExifVersion.length;i++)s+=String.fromCharCode(t.ExifVersion[i]);t.ExifVersion=s}return t},GPS:function(){var t;return t=e(c.gpsIFD,o.gps),t.GPSVersionID&&(t.GPSVersionID=t.GPSVersionID.join(".")),t},setExif:function(e,t){return"PixelXDimension"!==e&&"PixelYDimension"!==e?!1:r("exif",e,t)},getBinary:function(){return a.SEGMENT()}}}var d,h={};n.runtimes.Html5=n.addRuntime("html5",{getFeatures:function(){var i,s,r,a,o,l;return s=r=o=l=!1,e.XMLHttpRequest&&(i=new XMLHttpRequest,r=!!i.upload,s=!(!i.sendAsBinary&&!i.upload)),s&&(a=!!(i.sendAsBinary||e.Uint8Array&&e.ArrayBuffer),o=!(!File||!File.prototype.getAsDataURL&&!e.FileReader||!a),l=!(!File||!(File.prototype.mozSlice||File.prototype.webkitSlice||File.prototype.slice))),d=n.ua.safari&&n.ua.windows,{html5:s,dragdrop:function(){var e=t.createElement("div");return"draggable"in e||"ondragstart"in e&&"ondrop"in e}(),jpgresize:o,pngresize:o,multipart:o||!!e.FileReader||!!e.FormData,canSendBinary:a,cantSendBlobInFormData:!(!(n.ua.gecko&&e.FormData&&e.FileReader)||FileReader.prototype.readAsArrayBuffer),progress:r,chunks:l,multi_selection:!(n.ua.safari&&n.ua.windows),triggerDialog:n.ua.gecko&&e.FormData||n.ua.webkit}},init:function(i,s){function r(e){var t,s,r,a=[],o={};for(s=0;s<e.length;s++)t=e[s],o[t.name]||(o[t.name]=!0,r=n.guid(),h[r]=t,a.push(new n.File(r,t.fileName||t.name,t.fileSize||t.size)));a.length&&i.trigger("FilesAdded",a)}var l,u;return l=this.getFeatures(),l.html5?(i.bind("Init",function(e){var s,a,o,l,u,c,d,h=[],p=e.settings.filters,f=t.body;s=t.createElement("div"),s.id=e.id+"_html5_container",n.extend(s.style,{position:"absolute",background:i.settings.shim_bgcolor||"transparent",width:"100px",height:"100px",overflow:"hidden",zIndex:99999,opacity:i.settings.shim_bgcolor?"":0}),s.className="plupload html5",i.settings.container&&(f=t.getElementById(i.settings.container),"static"===n.getStyle(f,"position")&&(f.style.position="relative")),f.appendChild(s);e:for(o=0;o<p.length;o++)for(u=p[o].extensions.split(/,/),l=0;l<u.length;l++){if("*"===u[l]){h=[];break e}c=n.mimeTypes[u[l]],c&&-1===n.inArray(c,h)&&h.push(c)}if(s.innerHTML='<input id="'+i.id+'_html5"  style="font-size:999px" type="file" accept="'+h.join(",")+'" '+(i.settings.multi_selection&&i.features.multi_selection?'multiple="multiple"':"")+" />",s.scrollTop=100,d=t.getElementById(i.id+"_html5"),e.features.triggerDialog?n.extend(d.style,{position:"absolute",width:"100%",height:"100%"}):n.extend(d.style,{cssFloat:"right",styleFloat:"right"}),d.onchange=function(){r(this.files),this.value=""},a=t.getElementById(e.settings.browse_button)){var g=e.settings.browse_button_hover,m=e.settings.browse_button_active,v=e.features.triggerDialog?a:s;g&&(n.addEvent(v,"mouseover",function(){n.addClass(a,g)},e.id),n.addEvent(v,"mouseout",function(){n.removeClass(a,g)},e.id)),m&&(n.addEvent(v,"mousedown",function(){n.addClass(a,m)},e.id),n.addEvent(t.body,"mouseup",function(){n.removeClass(a,m)},e.id)),e.features.triggerDialog&&n.addEvent(a,"click",function(i){var n=t.getElementById(e.id+"_html5");n&&!n.disabled&&n.click(),i.preventDefault()},e.id)}}),i.bind("PostInit",function(){var e=t.getElementById(i.settings.drop_element);if(e){if(d)return n.addEvent(e,"dragenter",function(){var s,a,o;s=t.getElementById(i.id+"_drop"),s||(s=t.createElement("input"),s.setAttribute("type","file"),s.setAttribute("id",i.id+"_drop"),s.setAttribute("multiple","multiple"),n.addEvent(s,"change",function(){r(this.files),n.removeEvent(s,"change",i.id),s.parentNode.removeChild(s)},i.id),e.appendChild(s)),a=n.getPos(e,t.getElementById(i.settings.container)),o=n.getSize(e),"static"===n.getStyle(e,"position")&&n.extend(e.style,{position:"relative"}),n.extend(s.style,{position:"absolute",display:"block",top:0,left:0,width:o.w+"px",height:o.h+"px",opacity:0})},i.id),void 0;n.addEvent(e,"dragover",function(e){e.preventDefault()},i.id),n.addEvent(e,"drop",function(e){var t=e.dataTransfer;t&&t.files&&r(t.files),e.preventDefault()},i.id)}}),i.bind("Refresh",function(e){var s,r,a,o,l;s=t.getElementById(i.settings.browse_button),s&&(r=n.getPos(s,t.getElementById(e.settings.container)),a=n.getSize(s),o=t.getElementById(i.id+"_html5_container"),n.extend(o.style,{top:r.y+"px",left:r.x+"px",width:a.w+"px",height:a.h+"px"}),i.features.triggerDialog&&("static"===n.getStyle(s,"position")&&n.extend(s.style,{position:"relative"}),l=parseInt(n.getStyle(s,"z-index"),10),isNaN(l)&&(l=0),n.extend(s.style,{zIndex:l}),n.extend(o.style,{zIndex:l-1})))}),i.bind("DisableBrowse",function(e,i){var n=t.getElementById(e.id+"_html5");n&&(n.disabled=i)}),i.bind("CancelUpload",function(){u&&u.abort&&u.abort()}),i.bind("UploadFile",function(t,i){function s(e,t,i){var n;if(!File.prototype.slice)return(n=File.prototype.webkitSlice||File.prototype.mozSlice)?n.call(e,t,i):null;try{return e.slice(),e.slice(t,i)}catch(s){return e.slice(t,i-t)}}function r(r){function a(){function p(s){var r,d=0,h="----pluploadboundary"+n.guid(),p="--",w="\r\n",x="";if(u=new XMLHttpRequest,u.upload&&(u.upload.onprogress=function(e){i.loaded=Math.min(i.size,c+e.loaded-d),t.trigger("UploadProgress",i)}),u.onreadystatechange=function(){var e,l;if(4==u.readyState&&t.state!==n.STOPPED){try{e=u.status}catch(d){e=0}if(e>=400)t.trigger("Error",{code:n.HTTP_ERROR,message:n.translate("HTTP Error."),file:i,status:e});else{if(g){if(l={chunk:o,chunks:g,response:u.responseText,status:e},t.trigger("ChunkUploaded",i,l),c+=b,l.cancelled)return i.status=n.FAILED,void 0;i.loaded=Math.min(i.size,(o+1)*v)}else i.loaded=i.size;t.trigger("UploadProgress",i),s=f=r=x=null,!g||++o>=g?(i.status=n.DONE,t.trigger("FileUploaded",i,{response:u.responseText,status:e})):a()}}},t.settings.multipart&&l.multipart){if(m.name=i.target_name||i.name,u.open("post",y,!0),n.each(t.settings.headers,function(e,t){u.setRequestHeader(t,e)}),"string"!=typeof s&&e.FormData)return r=new FormData,n.each(n.extend(m,t.settings.multipart_params),function(e,t){r.append(t,e)}),r.append(t.settings.file_data_name,s),u.send(r),void 0;if("string"==typeof s){if(u.setRequestHeader("Content-Type","multipart/form-data; boundary="+h),n.each(n.extend(m,t.settings.multipart_params),function(e,t){x+=p+h+w+'Content-Disposition: form-data; name="'+t+'"'+w+w,x+=unescape(encodeURIComponent(e))+w}),_=n.mimeTypes[i.name.replace(/^.+\.([^.]+)/,"$1").toLowerCase()]||"application/octet-stream",x+=p+h+w+'Content-Disposition: form-data; name="'+t.settings.file_data_name+'"; filename="'+unescape(encodeURIComponent(i.name))+'"'+w+"Content-Type: "+_+w+w+s+w+p+h+p+w,d=x.length-s.length,s=x,u.sendAsBinary)u.sendAsBinary(s);else if(l.canSendBinary){for(var k=new Uint8Array(s.length),S=0;S<s.length;S++)k[S]=255&s.charCodeAt(S);u.send(k.buffer)}return}}y=n.buildUrl(t.settings.url,n.extend(m,t.settings.multipart_params)),u.open("post",y,!0),u.setRequestHeader("Content-Type","application/octet-stream"),n.each(t.settings.headers,function(e,t){u.setRequestHeader(t,e)}),u.send(s)}var f,g,m,v,b,_,y=t.settings.url;i.status!=n.DONE&&i.status!=n.FAILED&&t.state!=n.STOPPED&&(m={name:i.target_name||i.name},d.chunk_size&&i.size>d.chunk_size&&(l.chunks||"string"==typeof r)?(v=d.chunk_size,g=Math.ceil(i.size/v),b=Math.min(v,i.size-o*v),f="string"==typeof r?r.substring(o*v,o*v+b):s(r,o*v,o*v+b),m.chunk=o,m.chunks=g):(b=i.size,f=r),t.settings.multipart&&l.multipart&&"string"!=typeof f&&h&&l.cantSendBlobInFormData&&l.chunks&&t.settings.chunk_size?(h.onload=function(){p(h.result)},h.readAsBinaryString(f)):p(f))}var o=0,c=0,h="FileReader"in e?new FileReader:null;a()}var c,d=t.settings;c=h[i.id],l.jpgresize&&t.settings.resize&&/\.(png|jpg|jpeg)$/i.test(i.name)?o.call(t,i,t.settings.resize,/\.png$/i.test(i.name)?"image/png":"image/jpeg",function(e){e.success?(i.size=e.data.length,r(e.data)):l.chunks?r(c):a(c,r)}):!l.chunks&&l.jpgresize?a(c,r):r(c)}),i.bind("Destroy",function(e){var i,s,r=t.body,a={inputContainer:e.id+"_html5_container",inputFile:e.id+"_html5",browseButton:e.settings.browse_button,dropElm:e.settings.drop_element};for(i in a)s=t.getElementById(a[i]),s&&n.removeAllEvents(s,e.id);n.removeAllEvents(t.body,e.id),e.settings.container&&(r=t.getElementById(e.settings.container)),r.removeChild(t.getElementById(a.inputContainer))}),s({success:!0}),void 0):(s({success:!1}),void 0)}})}(window,document,plupload),function(e,t,i){function n(e){return t.getElementById(e)}i.runtimes.Html4=i.addRuntime("html4",{getFeatures:function(){return{multipart:!0,triggerDialog:i.ua.gecko&&e.FormData||i.ua.webkit}},init:function(s,r){s.bind("Init",function(r){function a(){var e,o,l,u;c=i.guid(),v.push(c),e=t.createElement("form"),e.setAttribute("id","form_"+c),e.setAttribute("method","post"),e.setAttribute("enctype","multipart/form-data"),e.setAttribute("encoding","multipart/form-data"),e.setAttribute("target",r.id+"_iframe"),e.style.position="absolute",o=t.createElement("input"),o.setAttribute("id","input_"+c),o.setAttribute("type","file"),o.setAttribute("accept",_),o.setAttribute("size",1),u=n(r.settings.browse_button),r.features.triggerDialog&&u&&i.addEvent(n(r.settings.browse_button),"click",function(e){o.disabled||o.click(),e.preventDefault()},r.id),i.extend(o.style,{width:"100%",height:"100%",opacity:0,fontSize:"99px",cursor:"pointer"}),i.extend(e.style,{overflow:"hidden"}),l=r.settings.shim_bgcolor,l&&(e.style.background=l),b&&i.extend(o.style,{filter:"alpha(opacity=0)"}),i.addEvent(o,"change",function(t){var l,d=t.target,h=[];d.value&&(n("form_"+c).style.top="-1048575px",l=d.value.replace(/\\/g,"/"),l=l.substring(l.length,l.lastIndexOf("/")+1),h.push(new i.File(c,l)),r.features.triggerDialog?i.removeEvent(u,"click",r.id):i.removeAllEvents(e,r.id),i.removeEvent(o,"change",r.id),a(),h.length&&s.trigger("FilesAdded",h))},r.id),e.appendChild(o),g.appendChild(e),r.refresh()}function o(){var n=t.createElement("div");n.innerHTML='<iframe id="'+r.id+'_iframe" name="'+r.id+'_iframe" src="'+m+':&quot;&quot;" style="display:none"></iframe>',l=n.firstChild,g.appendChild(l),i.addEvent(l,"load",function(t){var n,s,a=t.target;if(u){try{n=a.contentWindow.document||a.contentDocument||e.frames[a.id].document}catch(o){return r.trigger("Error",{code:i.SECURITY_ERROR,message:i.translate("Security error."),file:u}),void 0}s=n.body.innerHTML,s&&(u.status=i.DONE,u.loaded=1025,u.percent=100,r.trigger("UploadProgress",u),r.trigger("FileUploaded",u,{response:s}))}},r.id)}var l,u,c,d,h,p,f,g=t.body,m="javascript",v=[],b=/MSIE/.test(navigator.userAgent),_=[],y=r.settings.filters;e:for(d=0;d<y.length;d++)for(h=y[d].extensions.split(/,/),f=0;f<h.length;f++){if("*"===h[f]){_=[];break e}p=i.mimeTypes[h[f]],p&&-1===i.inArray(p,_)&&_.push(p)}_=_.join(","),r.settings.container&&(g=n(r.settings.container),"static"===i.getStyle(g,"position")&&(g.style.position="relative")),r.bind("UploadFile",function(e,s){var r,a;s.status!=i.DONE&&s.status!=i.FAILED&&e.state!=i.STOPPED&&(r=n("form_"+s.id),a=n("input_"+s.id),a.setAttribute("name",e.settings.file_data_name),r.setAttribute("action",e.settings.url),i.each(i.extend({name:s.target_name||s.name},e.settings.multipart_params),function(e,n){var s=t.createElement("input");i.extend(s,{type:"hidden",name:n,value:e}),r.insertBefore(s,r.firstChild)}),u=s,n("form_"+c).style.top="-1048575px",r.submit())}),r.bind("FileUploaded",function(e){e.refresh()}),r.bind("StateChanged",function(t){t.state==i.STARTED?o():t.state==i.STOPPED&&e.setTimeout(function(){i.removeEvent(l,"load",t.id),l.parentNode&&l.parentNode.removeChild(l)},0),i.each(t.files,function(e){if(e.status===i.DONE||e.status===i.FAILED){var t=n("form_"+e.id);t&&t.parentNode.removeChild(t)}})}),r.bind("Refresh",function(e){var s,r,a,o,l,u,d,h,p;s=n(e.settings.browse_button),s&&(l=i.getPos(s,n(e.settings.container)),u=i.getSize(s),d=n("form_"+c),h=n("input_"+c),i.extend(d.style,{top:l.y+"px",left:l.x+"px",width:u.w+"px",height:u.h+"px"}),e.features.triggerDialog&&("static"===i.getStyle(s,"position")&&i.extend(s.style,{position:"relative"}),p=parseInt(s.style.zIndex,10),isNaN(p)&&(p=0),i.extend(s.style,{zIndex:p}),i.extend(d.style,{zIndex:p-1})),a=e.settings.browse_button_hover,o=e.settings.browse_button_active,r=e.features.triggerDialog?s:d,a&&(i.addEvent(r,"mouseover",function(){i.addClass(s,a)},e.id),i.addEvent(r,"mouseout",function(){i.removeClass(s,a)},e.id)),o&&(i.addEvent(r,"mousedown",function(){i.addClass(s,o)},e.id),i.addEvent(t.body,"mouseup",function(){i.removeClass(s,o)},e.id)))}),s.bind("FilesRemoved",function(e,t){var i,s;for(i=0;i<t.length;i++)s=n("form_"+t[i].id),s&&s.parentNode.removeChild(s)}),s.bind("DisableBrowse",function(e,i){var n=t.getElementById("input_"+c);n&&(n.disabled=i)}),s.bind("Destroy",function(e){var s,r,a,o={inputContainer:"form_"+c,inputFile:"input_"+c,browseButton:e.settings.browse_button};for(s in o)r=n(o[s]),r&&i.removeAllEvents(r,e.id);i.removeAllEvents(t.body,e.id),i.each(v,function(e){a=n("form_"+e),a&&g.removeChild(a)})}),a()}),r({success:!0})}})}(window,document,plupload);
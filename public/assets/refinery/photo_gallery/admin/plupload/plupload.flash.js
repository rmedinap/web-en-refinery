!function(e,t,i){function n(){var e;try{e=navigator.plugins["Shockwave Flash"],e=e.description}catch(t){try{e=new ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version")}catch(i){e="0.0"}}return e=e.match(/\d+/g),parseFloat(e[0]+"."+e[1])}var s={},a={};i.flash={trigger:function(e,t,i){setTimeout(function(){var n=s[e];n&&n.trigger("Flash:"+t,i)},0)}},i.runtimes.Flash=i.addRuntime("flash",{getFeatures:function(){return{jpgresize:!0,pngresize:!0,maxWidth:8091,maxHeight:8091,chunks:!0,progress:!0,multipart:!0,multi_selection:!0}},init:function(e,o){function r(){return t.getElementById(e.id+"_flash")}function l(){return u++>5e3?(o({success:!1}),void 0):(a[e.id]===!1&&setTimeout(l,1),void 0)}var c,h,u=0,d=t.body;return n()<10?(o({success:!1}),void 0):(a[e.id]=!1,s[e.id]=e,c=t.getElementById(e.settings.browse_button),h=t.createElement("div"),h.id=e.id+"_flash_container",i.extend(h.style,{position:"absolute",top:"0px",background:e.settings.shim_bgcolor||"transparent",zIndex:99999,width:"100%",height:"100%"}),h.className="plupload flash",e.settings.container&&(d=t.getElementById(e.settings.container),"static"===i.getStyle(d,"position")&&(d.style.position="relative")),d.appendChild(h),function(){var n,s;n='<object id="'+e.id+'_flash" type="application/x-shockwave-flash" data="'+e.settings.flash_swf_url+'" ',i.ua.ie&&(n+='classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" '),n+='width="100%" height="100%" style="outline:0"><param name="movie" value="'+e.settings.flash_swf_url+'" /><param name="flashvars" value="id='+escape(e.id)+'" /><param name="wmode" value="transparent" /><param name="allowscriptaccess" value="always" /></object>',i.ua.ie?(s=t.createElement("div"),h.appendChild(s),s.outerHTML=n,s=null):h.innerHTML=n}(),l(),c=h=null,e.bind("Destroy",function(e){var n;i.removeAllEvents(t.body,e.id),delete a[e.id],delete s[e.id],n=t.getElementById(e.id+"_flash_container"),n&&d.removeChild(n)}),e.bind("Flash:Init",function(){var n={};try{r().setFileFilters(e.settings.filters,e.settings.multi_selection)}catch(s){return o({success:!1}),void 0}a[e.id]||(a[e.id]=!0,e.bind("UploadFile",function(t,s){var a=t.settings,o=e.settings.resize||{};r().uploadFile(n[s.id],a.url,{name:s.target_name||s.name,mime:i.mimeTypes[s.name.replace(/^.+\.([^.]+)/,"$1").toLowerCase()]||"application/octet-stream",chunk_size:a.chunk_size,width:o.width,height:o.height,quality:o.quality,multipart:a.multipart,multipart_params:a.multipart_params||{},file_data_name:a.file_data_name,format:/\.(jpg|jpeg)$/i.test(s.name)?"jpg":"png",headers:a.headers,urlstream_upload:a.urlstream_upload})}),e.bind("CancelUpload",function(){r().cancelUpload()}),e.bind("Flash:UploadProcess",function(e,t){var s=e.getFile(n[t.id]);s.status!=i.FAILED&&(s.loaded=t.loaded,s.size=t.size,e.trigger("UploadProgress",s))}),e.bind("Flash:UploadChunkComplete",function(e,t){var s,a=e.getFile(n[t.id]);s={chunk:t.chunk,chunks:t.chunks,response:t.text},e.trigger("ChunkUploaded",a,s),a.status!==i.FAILED&&e.state!==i.STOPPED&&r().uploadNextChunk(),t.chunk==t.chunks-1&&(a.status=i.DONE,e.trigger("FileUploaded",a,{response:t.text}))}),e.bind("Flash:SelectFiles",function(t,s){var a,o,r,l=[];for(o=0;o<s.length;o++)a=s[o],r=i.guid(),n[r]=a.id,n[a.id]=r,l.push(new i.File(r,a.name,a.size));l.length&&e.trigger("FilesAdded",l)}),e.bind("Flash:SecurityError",function(t,s){e.trigger("Error",{code:i.SECURITY_ERROR,message:i.translate("Security error."),details:s.message,file:e.getFile(n[s.id])})}),e.bind("Flash:GenericError",function(t,s){e.trigger("Error",{code:i.GENERIC_ERROR,message:i.translate("Generic error."),details:s.message,file:e.getFile(n[s.id])})}),e.bind("Flash:IOError",function(t,s){e.trigger("Error",{code:i.IO_ERROR,message:i.translate("IO error."),details:s.message,file:e.getFile(n[s.id])})}),e.bind("Flash:ImageError",function(t,s){e.trigger("Error",{code:parseInt(s.code,10),message:i.translate("Image error."),file:e.getFile(n[s.id])})}),e.bind("Flash:StageEvent:rollOver",function(n){var s,a;s=t.getElementById(e.settings.browse_button),a=n.settings.browse_button_hover,s&&a&&i.addClass(s,a)}),e.bind("Flash:StageEvent:rollOut",function(n){var s,a;s=t.getElementById(e.settings.browse_button),a=n.settings.browse_button_hover,s&&a&&i.removeClass(s,a)}),e.bind("Flash:StageEvent:mouseDown",function(n){var s,a;s=t.getElementById(e.settings.browse_button),a=n.settings.browse_button_active,s&&a&&(i.addClass(s,a),i.addEvent(t.body,"mouseup",function(){i.removeClass(s,a)},n.id))}),e.bind("Flash:StageEvent:mouseUp",function(n){var s,a;s=t.getElementById(e.settings.browse_button),a=n.settings.browse_button_active,s&&a&&i.removeClass(s,a)}),e.bind("Flash:ExifData",function(t,i){e.trigger("ExifData",e.getFile(n[i.id]),i.data)}),e.bind("Flash:GpsData",function(t,i){e.trigger("GpsData",e.getFile(n[i.id]),i.data)}),e.bind("QueueChanged",function(){e.refresh()}),e.bind("FilesRemoved",function(e,t){var i;for(i=0;i<t.length;i++)r().removeFile(n[t[i].id])}),e.bind("StateChanged",function(){e.refresh()}),e.bind("Refresh",function(n){var s,a,o;r().setFileFilters(e.settings.filters,e.settings.multi_selection),s=t.getElementById(n.settings.browse_button),s&&(a=i.getPos(s,t.getElementById(n.settings.container)),o=i.getSize(s),i.extend(t.getElementById(n.id+"_flash_container").style,{top:a.y+"px",left:a.x+"px",width:o.w+"px",height:o.h+"px"}))}),e.bind("DisableBrowse",function(e,t){r().disableBrowse(t)}),o({success:!0}))}),void 0)}})}(window,document,plupload);
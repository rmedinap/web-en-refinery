!function(e){var t=e.fancybox;t.helpers.thumbs={wrap:null,list:null,width:0,source:function(t){var i;return"string"===e.type(t)?t:(i=e(t).find("img"),i.length?i.attr("src"):t.href)},init:function(i){var n,s=this,r=i.width||50,a=i.height||50,o=i.source||this.source;n="";for(var l=0;l<t.group.length;l++)n+='<li><a style="width:'+r+"px;height:"+a+'px;" href="javascript:jQuery.fancybox.jumpto('+l+');"></a></li>';this.wrap=e('<div id="fancybox-thumbs"></div>').addClass(i.position||"bottom").appendTo("body"),this.list=e("<ul>"+n+"</ul>").appendTo(this.wrap),e.each(t.group,function(i){e("<img />").load(function(){var t,n,o,l=this.width,u=this.height;s.list&&l&&u&&(t=l/r,n=u/a,o=s.list.children().eq(i).find("a"),t>=1&&n>=1&&(t>n?(l=Math.floor(l/n),u=a):(l=r,u=Math.floor(u/t))),e(this).css({width:l,height:u,top:Math.floor(a/2-u/2),left:Math.floor(r/2-l/2)}),o.width(r).height(a),e(this).hide().appendTo(o).fadeIn(300))}).attr("src",o(t.group[i]))}),this.width=this.list.children().eq(0).outerWidth(!0),this.list.width(this.width*(t.group.length+1)).css("left",Math.floor(.5*e(window).width()-(t.current.index*this.width+.5*this.width)))},update:function(){this.list&&this.list.stop(!0).animate({left:Math.floor(.5*e(window).width()-(t.current.index*this.width+.5*this.width))},150)},beforeLoad:function(e){return t.group.length<2?(t.coming.helpers.thumbs=!1,void 0):(t.coming.margin["top"===e.position?0:2]=e.height+30,void 0)},afterShow:function(e){this.list?this.update(e):this.init(e),this.list.children().removeClass("active").eq(t.current.index).addClass("active")},onUpdate:function(){this.update()},beforeClose:function(){this.wrap&&this.wrap.remove(),this.wrap=null,this.list=null,this.width=0}}}(jQuery);